/* ========= Base dark tweaks ========= */
:root [data-md-color-scheme="slate"] {
  --md-default-bg-color: transparent;
  --md-code-bg-color: rgba(255,255,255,0.04);
  --md-default-fg-color--light: rgba(255,255,255,.88);
}

.md-header {
  background: rgba(10, 10, 20, 0.8);
  backdrop-filter: blur(5px);
  border-bottom: 1px solid rgba(255,255,255,0.05);
  z-index: 10005; /* ниже окна поиска, выше фона */
}

.md-typeset a:hover { text-shadow: 0 0 10px rgba(0, 224, 255, 0.4); }
.md-typeset h1, .md-typeset h2 { text-shadow: 0 0 12px rgba(108,99,255,0.3); }

/* Глобальный радиус */
:root { --radius: 16px; }
.md-search__output,
.md-card,
.md-typeset .admonition,
.md-typeset details { border-radius: var(--radius); overflow: hidden; }
.md-typeset table, .md-typeset img, .md-typeset figure { border-radius: 12px; overflow: hidden; }


/* ========= Search overlay: dark, fixed, full-width content ========= */

/* высота шапки и базовые размеры */
:root { --header-h: 3.2rem; }
@media (max-width: 76.1875em) { :root { --header-h: 3.4rem; } }

/* затемнение страницы при открытом поиске */
.md-overlay { z-index: 1000; }
[data-md-state="search"] .md-overlay {
  background-color: rgba(0, 0, 0, 0.86);
  backdrop-filter: blur(3px);
  opacity: 1;
}

/* фиксируем ТОЛЬКО окно результатов; сам .md-search не трогаем */
.md-search__output {
  position: fixed;
  top: var(--header-h);
  left: 0;
  right: 0;
  margin: 0 auto;

  width: min(1040px, calc(100vw - 32px));   /* можно вернуть 960px, если хочешь уже */
  max-height: calc(100vh - var(--header-h) - 32px);

  /* ключ: скролл переносим ВНУТРЬ, контейнер обрезает края по радиусу */
  overflow: hidden;
  overscroll-behavior: contain;

  z-index: 10020; /* выше шапки и оверлея */

  background: rgba(6, 8, 12, 0.98);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: var(--radius);
  box-shadow: 0 8px 30px rgba(0,0,0,.45);
}

/* внутренний скролл-контейнер — контент во всю ширину, без «зазора» справа */
.md-search__scrollwrap {
  max-height: calc(100vh - var(--header-h) - 32px);
  overflow: auto;
  padding: 0;                       /* убираем резерв под скролл */
  box-sizing: border-box;

  /* во всех браузерах держим стабильный гуттер, чтобы не прыгало */
  scrollbar-gutter: stable both-edges;   /* Chrome/Safari поддерживают */
}

/* На Firefox сузим полосу скролла, чтобы она не «съедала» ширину визуально */
.md-search__scrollwrap { scrollbar-width: thin; }
.md-search__scrollwrap::-webkit-scrollbar { width: 12px; }  /* Chrome/Edge */
.md-search__scrollwrap::-webkit-scrollbar-thumb {
  background: rgba(0, 240, 220, 0.35);
  border-radius: 8px;
}
.md-search__scrollwrap::-webkit-scrollbar-track { background: transparent; }

/* плашка "n matching documents" — на всю ширину и прилипает сверху */
.md-search__output .md-search-result__meta {
  position: sticky;
  top: 0;
  z-index: 1;
  margin: 0;                  /* убрали отрицательные маргины */
  padding-right: 0;           /* ничего не срезаем справа */
  border-top-left-radius: var(--radius);
  border-top-right-radius: var(--radius);
  background: rgba(20, 22, 28, 0.98);
}

/* внутренности — без ограничителя ширины темы */
.md-search__output .md-search-result {
  max-width: none;
  width: 100%;
}

/* список результатов: используем всю ширину окна */
.md-search-result__list {
  width: 100%;
  padding: 8px 12px;
  box-sizing: border-box;
}

/* карточки результатов — чистые, с мягким hover */
.md-search-result__item,
.md-search-result__article {
  background: transparent !important;
  border-radius: 12px;
  margin: 6px 0;
  padding: 10px 12px;
}
.md-search-result__item:hover {
  background: rgba(255,255,255,.04);
  box-shadow: 0 0 0 1px rgba(255,255,255,.06) inset;
}

/* подсветка совпадений — мягкая */
.md-search-result__teaser { opacity: .95; }
.md-search-result__teaser mark,
.md-search-result__title mark {
  background: rgba(108, 99, 255, .22);
  color: #e6e6ff;
  border-radius: 3px;
  padding: 0 .2em;
}

/* кликабельность ссылок в выдаче */
.md-search-result__link,
.md-search__output a { pointer-events: auto; }

/* мобильная адаптация: растягиваем на всю ширину */
@media (max-width: 600px) {
  .md-search__output {
    width: 100vw;
    border-radius: 0 0 var(--radius) var(--radius);
  }
  .md-search-result__list { padding: 6px 8px; }
}

/* Убираем выпадающий список и стрелку у переключателя языка */
.md-select__list { display: none !important; }

/* Делаем из селектора обычную кнопку */
.md-select { cursor: pointer; }
/* На всякий, если у темы есть отдельная «стрелочка» у селектора — прячем только её */
.md-select__icon { display: none !important; }

